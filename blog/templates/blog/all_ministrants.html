{% extends "blog/base.html" %}
{% block content %}
<table class="table">
  <thead class="thead-light">
    <tr>
      <th scope="col">#</th>
      <th scope="col">Jméno</th>
      <th scope="col">Příjmení</th>
      <th scope="col">Datum narození</th>
      <th scope="col">věk na táboře</th>
    </tr>
  </thead>
  <tbody>
    {% for ministrant in ministrants %}
      {% if user.is_superuser%}
      <tr class="ministrant-row" data-ministrant-id="{{ ministrant.id }}">
        <th scope="row">{{ ministrant.id }}</th>
        <td>{{ ministrant.birthname }}</td>
        <td>{{ ministrant.surname }}</td>
        <td>{{ ministrant.birth_date }}</td>
        <td>{{ ministrant.birth_date|timesince:now }}</td>
      </tr>
      <tr class="details-row collapse" id="ministrant-details-{{ ministrant.id }}">
        <td colspan="6">
          <div class="card">
            <div class="card-body">
              <h5 class="card-title">{{ ministrant.birthname }} {{ ministrant.surname }}</h5>
              <p class="card-text">
                <table>
                  <tr>
                    <th>Birth date</th>
                    <td>{{ ministrant.birth_date }}</td>
                  </tr>
                  <tr>
                    <th>Address</th>
                    <td>{{ ministrant.address }}</td>
                  </tr>
                  <tr>
                    <th>Town</th>
                    <td>{{ ministrant.town }}</td>
                  </tr>
                  <tr>
                    <th>Town zip</th>
                    <td>{{ ministrant.town_zip }}</td>
                  </tr>
                  <tr>
                    <th>Insurance</th>
                    <td>{{ ministrant.insurance }}</td>
                  </tr>
                  <tr>
                    <th>Parrent</th>
                    <td>{{ ministrant.parrent }}</td>
                  </tr>
                  <tr>
                    <th>Parrents phone</th>
                    <td>{{ ministrant.parrents_phone }}</td>
                  </tr>
                  <tr>
                    <th>Parrents email</th>
                    <td>{{ ministrant.parrents_email }}</td>
                  </tr>
                </table>
                
              </p>
            </div>
          </div>
        </td>
      </tr>
      {% endif %}
    {% endfor %}
  </tbody>
</table>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  $(document).ready(function() {
    $('.ministrant-row').on('click', function() {
      var detailsRow = $(this).next('.details-row');
      var expandButton = $(this).find('.expand-button');
      
      detailsRow.collapse('toggle');
      expandButton.toggleClass('expanded');
    });
  });
</script>
{% endblock content %}
